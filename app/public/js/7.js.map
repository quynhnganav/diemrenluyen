{"version":3,"file":"js/7.js","mappings":"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","sources":["webpack:///./resources/js/API/DanhGiaAPI.js","webpack:///./resources/js/components/LayoutWrapper/style.scss?5085","webpack:///./resources/js/components/LayoutWrapper/index.js","webpack:///./resources/js/components/TableDanhGia/style.scss?a29f","webpack:///./resources/js/components/TableDanhGia/index.js","webpack:///./resources/js/config/axios.js","webpack:///./resources/js/pages/sv/danh-gia/index.js","webpack:///./resources/js/components/LayoutWrapper/style.scss","webpack:///./resources/js/components/TableDanhGia/style.scss"],"sourcesContent":["import { axios } from \"../config\";\nconst queryString = require('query-string');\n\nconst getDanhGiaSV = (filter) => {\n    const route = `/sv/danh-gia/api?${queryString.stringify(filter, { skipNull: true, skipEmptyString: true })}`;\n    return axios.get(route);\n}\n\nconst postDanhGiaSV = (payload) => {\n    const route = `/sv/danh-gia`;\n    return axios.post(route, payload);\n}\n\nconst getCBLDanhSachSV = (filter) => {\n    const route = `/sv/cbl/danh-gia/api?${queryString.stringify(filter, { skipNull: true, skipEmptyString: true })}`;\n    return axios.get(route);\n}\n\nconst getCBLDanhGiaSv = (idSv, filter) => {\n    const route = `/sv/cbl/danh-gia/api/sinh-vien/${idSv}?${queryString.stringify(filter, { skipNull: true, skipEmptyString: true })}`;\n    return axios.get(route);\n}\n\nconst postCBLDanhGiaSV = (idSv, payload) => {\n    const route = `/sv/cbl/danh-gia/api/sinh-vien/${idSv}`;\n    return axios.post(route, payload);\n}\n\n// const createAdministrator = \n// const editAdministrator = (id, payload) => {\n//     const route = `/core/admin/administrators/${admin_id}`;\n//     return axios.put(route, payload);\n// }\n// const removeAdministrator = (admin_id) => {\n//     const route = `/core/admin/administrators/${admin_id}`;\n//     return axios.delete(route);\n// }\n\nexport {\n    getDanhGiaSV, \n    postDanhGiaSV,\n    getCBLDanhSachSV,\n    getCBLDanhGiaSv,\n    postCBLDanhGiaSV\n}","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[3]!./style.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import React from \"react\";\nimport \"./style.scss\"\n\nconst LayoutWrapper = ({ children, className }) => {\n\n    return (\n        <div className={`dimark-wrapper ${className || ''}`}>\n            {children}\n        </div>\n    )\n\n}\n\nexport default LayoutWrapper;","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[7].oneOf[1].use[3]!./style.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { Form, InputNumber, Table, Tooltip } from \"antd\";\nimport { useForm } from \"antd/lib/form/Form\";\nimport React, { forwardRef, memo, useCallback, useEffect, useImperativeHandle, useMemo, useReducer } from \"react\";\nimport { flattenTree, reducer, setValuesTree } from \"../../utils\";\nimport \"./style.scss\";\n\nconst genIndex = (level, index) => {\n    const obj = {\n        '1.1': '1.',\n        '1.2': '2.',\n        '1.3': '3.',\n        '1.4': '4.',\n        '1.5': '5.',\n        '2.1': 'a)',\n        '2.2': 'b)',\n        '2.3': 'c)',\n        '2.4': 'd)',\n        '2.5': 'e)',\n    }\n    return obj[`${level}.${index[level - 1]}`] || '-'\n}\n\nconst TableDanhGia = forwardRef(({\n    tree,\n    loading,\n    type,\n    onSuccess\n}, ref) => {\n\n    const [state, setState] = useReducer(reducer, {\n        raw: [],\n        tieuChis: [],\n        totalSV: 0,\n        totalCBL: 0,\n        total: 0\n    })\n\n    const [form] = useForm()\n\n    const scrollToTop = useCallback(() => {\n        const ele = document.querySelector('.table-danh-gia .ant-table-body')\n        ele?.scroll({\n            behavior: 'smooth',\n            top: 0\n        })\n    }, [])\n\n    useEffect(() => {\n        const [data, total, formValue, sv, cbl] = flattenTree(tree || [])\n        setState({\n            tieuChis: data,\n            raw: tree,\n            totalSV: sv,\n            totalCBL: cbl,\n            total\n        })\n        form?.setFieldsValue(formValue)\n        scrollToTop()\n    }, [tree])\n\n    const submit = useCallback(() => {\n        form?.submit()\n    }, [form])\n\n    const setFieldsValue = useCallback((values) => {\n        form?.setFields(values)\n    }, [form])\n\n    const onFinish = useCallback((values) => {\n        onSuccess && onSuccess(values)\n    }, [onSuccess])\n\n\n\n    useImperativeHandle(ref, () => ({\n        submit,\n        setFieldsValue,\n        scrollToTop\n    }))\n\n    const onChangeValue = useCallback((value, id, type) => {\n        const newTree = setValuesTree(state.raw, id, value, type)\n        const [data, total, formValue, sv, cbl] = flattenTree(newTree)\n        form?.setFieldsValue(formValue)\n        setState({\n            tieuChis: data,\n            raw: newTree,\n            totalSV: sv,\n            totalCBL: cbl,\n            total\n        })\n    }, [state.raw])\n\n    const columns = useMemo(() => ([\n        {\n            title: \"Nội dung và tiêu chí đánh giá\",\n            dataIndex: \"TenTieuChi\",\n            key: \"TenTieuChi\",\n            render: (text, record) =>\n                <p className={`TenTieuChi${record.level}`}>\n                    {genIndex(record?.level, record?.index)} {text} {record?.isDiemHocTap ? <strong>(Điểm được lấy theo hệ thống đào tạo)</strong> : ''}\n                </p>\n        },\n        {\n            title: () => (\n                <>\n                    <p>Khung điểm tối đa</p>\n                    <p>({state.total})</p>\n                </>\n            ),\n            dataIndex: \"SoDiem\",\n            className: 'cell-center',\n            width: 120,\n            key: \"SoDiem\"\n        },\n        {\n            title: () => (\n                <>\n                    <p>Điểm</p>\n                    <p>(do sinh viên tự đánh giá)</p>\n                    <p>({state.totalSV})</p>\n                </>\n            ),\n            dataIndex: \"myPoint\",\n            className: 'cell-center',\n            width: 130,\n            key: \"myPoint\",\n            render: (text, record) => (\n                <Tooltip placement='top' title={record?.TenTieuChi}>\n                    <Form.Item name={`SoDiemSV-${record.id}`} style={{ margin: 0 }}\n                        rules={[\n                            { required: 'true', message: 'Nhập điểm' },\n                        ]}\n                    >\n                        <InputNumber\n                            disabled={record.isParent || type === 'CBL' || !type || record.isDiemHocTap}\n                            min={0}\n                            max={record.SoDiem}\n                            onChange={value => onChangeValue(value, record?.id, 'SoDiemSV')}\n                        />\n                    </Form.Item>\n                </Tooltip>\n            )\n        },\n        {\n            title: () => (\n                <>\n                    <p>Điểm</p>\n                    <p>(do tập thể lớp đánh giá)</p>\n                    <p>({state.totalCBL})</p>\n                </>\n            ),\n            dataIndex: \"CBLPoint\",\n            className: 'cell-center',\n            width: 130,\n            key: \"CBLPoint\",\n            render: (text, record) => (\n                <Tooltip placement='top' title={record?.TenTieuChi}>\n                    <Form.Item name={`SoDiemCBL-${record.id}`} style={{ margin: 0 }}\n                        rules={[\n                            { required: 'true', message: 'Nhập điểm' },\n                        ]}\n                    >\n                        <InputNumber\n                            disabled={record.isParent || type === \"SV\" || !type || record.isDiemHocTap}\n                            min={0}\n                            max={record.SoDiem}\n                            onChange={value => onChangeValue(value, record?.id, 'SoDiemCBL')}\n                        />\n                    </Form.Item>\n                </Tooltip>\n            )\n        },\n    ]), [state])\n\n    return (\n        <>\n            <Form\n                form={form}\n                name='form-danh-gia'\n                onFinish={onFinish}\n            >\n                <Table\n                    columns={columns}\n                    bordered\n                    loading={loading}\n                    dataSource={state.tieuChis}\n                    rowKey={(v) => v?.id}\n                    scroll={{ x: 700, y: 'calc(100vh - 290px)' }}\n                    pagination={false}\n                    locale={{\n                        emptyText: 'Không có dữ liệu'\n                    }}\n                    className='table-danh-gia'\n                />\n            </Form>\n        </>\n    )\n})\n\nexport default memo(TableDanhGia)","\r\nimport * as Axios from \"axios\";\r\n\r\nlet token = document.head.querySelector('meta[name=\"csrf-token\"]');\r\n\r\nconst axios = Axios.default.create({\r\n    baseURL: '/',\r\n    responseType: 'json',\r\n    // timeout: 1000,\r\n    // headers: {\r\n    //     'Accept': 'application/json'\r\n    // }\r\n})\r\n\r\nexport {\r\n    axios\r\n}","import { Col, notification, Row, Button } from \"antd\";\nimport React, { useReducer, useEffect, useCallback, useRef } from \"react\";\nimport LayoutWrapper from \"../../../components/LayoutWrapper\";\nimport TableDanhGia from \"../../../components/TableDanhGia\";\nimport * as DanhGiaAPI from \"../../../API/DanhGiaAPI\";\nimport { reducer } from \"../../../utils\";\nimport { axios } from \"../../../config\";\n\nconst SVDanhGia = () => {\n\n\n    const [state, setState] = useReducer(reducer, {\n        tree: [],\n        dotDanhGia: null,\n        danhGia: null,\n        loading: false\n    });\n\n    const refTableDanhGia = useRef(null)\n\n    useEffect(() => {\n        loadData()\n    }, [])\n\n    const loadData = useCallback(() => {\n        setState({\n            loading: true\n        })\n        DanhGiaAPI.getDanhGiaSV()\n            .then(res => {\n                setState({\n                    tree: res?.data?.tieuChi || [],\n                    dotDanhGia: res?.data?.dotDanhGia,\n                    danhGia: res?.data?.danhGia\n                })\n            })\n            .catch(err => {\n                notification.warning({\n                    message: err?.response?.data?.message || 'Lỗi khi tải dữ liệu'\n                })\n            })\n            .finally(() => setState({\n                loading: false\n            }))\n    }, [])\n\n    const onSubmit = useCallback(() => {\n        refTableDanhGia?.current?.submit()\n    }, [refTableDanhGia])\n\n    const onSuccess = useCallback((values) => {\n        const payload = {}\n        Object.keys(values).forEach((key) => {\n            if (key.includes('SoDiemSV')) {\n                const id = key.split('-')[1];\n                payload[id] = values[key];\n            }\n        })\n        setState({\n            loading: true\n        })\n        DanhGiaAPI.postDanhGiaSV(payload)\n            .then(response => {\n                notification.success({\n                    message: 'Cập nhật thành công'\n                })\n            })\n            .catch(err => {\n                console.log(err?.response)\n                if (err?.response?.status == 422) {\n                    const data = err?.response?.data || []\n                    const errors = data.map((d) => ({\n                        name: `SoDiemSV-${d}`,\n                        errors: ['Lỗi']\n                    }))\n                    refTableDanhGia?.current?.setFieldsValue(errors)\n                }\n                else notification.error({\n                    message: 'Lỗi'\n                })\n            })\n            .finally(() => setState({\n                loading: false\n            }))\n    }, [refTableDanhGia])\n\n    return (\n        <LayoutWrapper className='danh-gia-page'>\n            <Row className='bg-white p-3 content'>\n                <Col span={24}>\n                    <Row justify='space-between'>\n                        <Row>\n                            {/* <Col>\n                                <p>{ state?.dotDanhGia?.TenDotDanhGia }</p>\n                            </Col> */}\n                        </Row>\n                        <Row justify='end'>\n                            <Col>\n                                <Button type='primary' disabled={state.loading} onClick={onSubmit} >Cập nhật</Button>\n                            </Col>\n                        </Row>\n                    </Row>\n                </Col>\n                <Col span={24} className='mt-3'>\n                    <TableDanhGia\n                        tree={state.tree}\n                        loading={state.loading}\n                        type={state.danhGia?.GiangVienDuyet ? null : 'SV'}\n                        ref={refTableDanhGia}\n                        onSuccess={onSuccess}\n                    />\n                </Col>\n            </Row>\n        </LayoutWrapper>\n    )\n};\n\nexport default SVDanhGia\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".dimark-wrapper{padding:10px 10px 0}.dimark-wrapper .ant-table-thead tr th{background:#2a3f54;color:#fff}.dimark-wrapper .ant-pagination{margin-bottom:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/components/LayoutWrapper/style.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAEI,mBACJ,CAGW,uCACC,kBAAA,CACA,UADZ,CAMG,gCACG,eAJN\",\"sourcesContent\":[\".dimark-wrapper {\\n    padding: 10px;\\n    padding-bottom: 0; \\n\\n   .ant-table-thead  {\\n        tr {\\n           th {\\n            background: #2A3F54;\\n            color: white;\\n           }\\n        }\\n   }\\n   \\n   .ant-pagination {\\n      margin-bottom: 0;\\n   }\\n\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".TenTieuChi1{font-size:18px;font-weight:700}.TenTieuChi2{font-size:16px;font-style:italic}.TenTieuChi3{font-size:15px;margin-left:5px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/components/TableDanhGia/style.scss\"],\"names\":[],\"mappings\":\"AAAA,aAEI,cAAA,CADA,eAEJ,CAEA,aAEI,cAAA,CADA,iBAEJ,CAEA,aAEI,cAAA,CADA,eAEJ\",\"sourcesContent\":[\".TenTieuChi1 {\\n    font-weight: bold;\\n    font-size: 18px;\\n}\\n\\n.TenTieuChi2 {\\n    font-style: italic;\\n    font-size: 16px;\\n}\\n\\n.TenTieuChi3 {\\n    margin-left: 5px;\\n    font-size: 15px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["queryString","require","getDanhGiaSV","filter","route","stringify","skipNull","skipEmptyString","axios","postDanhGiaSV","payload","getCBLDanhSachSV","getCBLDanhGiaSv","idSv","postCBLDanhGiaSV","options","children","className","TableDanhGia","forwardRef","ref","tree","loading","type","onSuccess","useReducer","reducer","raw","tieuChis","totalSV","totalCBL","total","state","setState","form","useForm","scrollToTop","useCallback","ele","document","querySelector","scroll","behavior","top","useEffect","flattenTree","data","formValue","sv","cbl","setFieldsValue","submit","values","setFields","onFinish","useImperativeHandle","onChangeValue","value","id","newTree","setValuesTree","columns","useMemo","title","dataIndex","key","render","text","record","level","index","isDiemHocTap","width","placement","TenTieuChi","name","style","margin","rules","required","message","disabled","isParent","min","max","SoDiem","onChange","bordered","dataSource","rowKey","v","x","y","pagination","locale","emptyText","memo","head","Axios","baseURL","responseType","dotDanhGia","danhGia","refTableDanhGia","useRef","loadData","DanhGiaAPI","then","res","tieuChi","err","response","onSubmit","current","Object","keys","forEach","includes","split","console","log","status","errors","map","d","span","justify","onClick","GiangVienDuyet","___CSS_LOADER_EXPORT___","push","module"],"sourceRoot":""}