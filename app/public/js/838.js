"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[838],{4252:(n,e,r)=>{r.d(e,{Z:()=>u});r(7294);var t=r(3379),i=r.n(t),l=r(7684),o={insert:"head",singleton:!1};i()(l.Z,o);l.Z.locals;var a=r(5893);const u=function(n){var e=n.children,r=n.className;return(0,a.jsx)("div",{className:"dimark-wrapper ".concat(r||""),children:e})}},7461:(n,e,r)=>{r.d(e,{o:()=>i});var t=r(9669),i=r.n(t)().create({baseURL:"/"})},4838:(n,e,r)=>{r.r(e),r.d(e,{default:()=>Z});var t=r(1577),i=r(1230),l=r(5746),o=r(8648),a=r(7294),u=r(4252),c=r(6226),d=r(4561),s=r(8835),f=r(963),h=r(6659),v=r(3379),m=r.n(v),p=r(316),y={insert:"head",singleton:!1};m()(p.Z,y);p.Z.locals;var g=r(5893);function b(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==r)return;var t,i,l=[],o=!0,a=!1;try{for(r=r.call(n);!(o=(t=r.next()).done)&&(l.push(t.value),!e||l.length!==e);o=!0);}catch(n){a=!0,i=n}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return l}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return S(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}var j=(0,a.forwardRef)((function(n,e){var r=n.tree,t=n.loading,i=n.type,l=void 0===i?"all":i,o=n.onSuccess,u=b((0,a.useReducer)(h.I6,{raw:[],tieuChis:[],totalSV:0,totalCBL:0,total:0}),2),v=u[0],m=u[1],p=b((0,f.cI)(),1)[0];(0,a.useEffect)((function(){var n=b((0,h.fK)(r||[]),5),e=n[0],t=n[1],i=n[2],l=n[3],o=n[4];m({tieuChis:e,raw:r,totalSV:l,totalCBL:o,total:t}),null==p||p.setFieldsValue(i)}),[r]);var y=(0,a.useCallback)((function(){null==p||p.submit()}),[]),S=(0,a.useCallback)((function(n){o&&o(n)}),[]);(0,a.useImperativeHandle)(e,(function(){return{submit:y}}));var j=(0,a.useCallback)((function(n,e,r){var t=(0,h.ZC)(v.raw,e,n,r),i=b((0,h.fK)(t),5),l=i[0],o=i[1],a=i[2],u=i[3],c=i[4];null==p||p.setFieldsValue(a),m({tieuChis:l,raw:t,totalSV:u,totalCBL:c,total:o})}),[v.raw]),x=(0,a.useMemo)((function(){return[{title:"Nội dung và tiêu chí đánh giá",dataIndex:"TenTieuChi",key:"TenTieuChi",render:function(n,e){return(0,g.jsxs)("p",{className:"TenTieuChi".concat(e.level),children:[(r=null==e?void 0:e.level,t=null==e?void 0:e.index,{1.1:"1.",1.2:"2.",1.3:"3.",1.4:"4.",1.5:"5.",2.1:"a)",2.2:"b)",2.3:"c)",2.4:"d)",2.5:"e)"}["".concat(r,".").concat(t[r-1])]||"-")," ",n]});var r,t}},{title:function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:"Khung điểm tối đa"}),(0,g.jsxs)("p",{children:["(",v.total,")"]})]})},dataIndex:"SoDiem",className:"cell-center",width:120,key:"SoDiem"},{title:function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:"Điểm"}),(0,g.jsx)("p",{children:"(do sinh viên tự đánh giá)"}),(0,g.jsxs)("p",{children:["(",v.totalSV,")"]})]})},dataIndex:"myPoint",className:"cell-center",width:130,key:"myPoint",render:function(n,e){return(0,g.jsx)(d.Z.Item,{name:"SoDiemSV-".concat(e.id),style:{margin:0},rules:[{required:"true",message:"Nhập điểm"}],children:(0,g.jsx)(s.Z,{disabled:e.isParent||"CBL"===l,min:0,max:e.SoDiem,onChange:function(n){return j(n,null==e?void 0:e.id,"SoDiemSV")}})})}},{title:function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:"Điểm"}),(0,g.jsx)("p",{children:"(do tập thể lớp đánh giá)"}),(0,g.jsxs)("p",{children:["(",v.totalCBL,")"]})]})},dataIndex:"CBLPoint",className:"cell-center",width:130,key:"CBLPoint",render:function(n,e){return(0,g.jsx)(d.Z.Item,{name:"SoDiemCBL-".concat(e.id),style:{margin:0},rules:[{required:"true",message:"Nhập điểm"}],children:(0,g.jsx)(s.Z,{disabled:e.isParent||"SV"===l,min:0,max:e.SoDiem,onChange:function(n){return j(n,null==e?void 0:e.id,"SoDiemCBL")}})})}}]}),[v]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(d.Z,{form:p,name:"form-danh-gia",onFinish:S,children:(0,g.jsx)(c.Z,{columns:x,bordered:!0,loading:t,dataSource:v.tieuChis,rowKey:function(n){return null==n?void 0:n.id},scroll:{x:700,y:"calc(100vh - 290px)"},pagination:!1,locale:{emptyText:"Không có dữ liệu"}})})})}));const x=(0,a.memo)(j);var C=r(7461),w=r(7563);function D(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==r)return;var t,i,l=[],o=!0,a=!1;try{for(r=r.call(n);!(o=(t=r.next()).done)&&(l.push(t.value),!e||l.length!==e);o=!0);}catch(n){a=!0,i=n}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return l}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return T(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}const Z=function(){var n,e=D((0,a.useReducer)(h.I6,{tree:[],dotDanhGia:null,loading:!1}),2),r=e[0],c=e[1],d=(0,a.useRef)(null);(0,a.useEffect)((function(){s()}),[]);var s=(0,a.useCallback)((function(){var n,e;c({loading:!0}),(e="/sv/danh-gia/api?".concat(w.stringify(n,{skipNull:!0,skipEmptyString:!0})),C.o.get(e)).then((function(n){var e,r;c({tree:(null==n||null===(e=n.data)||void 0===e?void 0:e.tieuChi)||[],dotDanhGia:null==n||null===(r=n.data)||void 0===r?void 0:r.dotDanhGia})})).catch((function(n){o.Z.error({message:"Lỗi khi tải dữ liệu"})})).finally((function(){return c({loading:!1})}))}),[]),f=(0,a.useCallback)((function(){var n;null==d||null===(n=d.current)||void 0===n||n.submit()})),v=(0,a.useCallback)((function(n){console.log(n)}),[]);return(0,g.jsx)(u.Z,{className:"danh-gia-page",children:(0,g.jsxs)(i.Z,{className:"bg-white p-3 content",children:[(0,g.jsx)(l.Z,{span:24,children:(0,g.jsxs)(i.Z,{justify:"space-between",children:[(0,g.jsx)(i.Z,{children:(0,g.jsx)(l.Z,{children:(0,g.jsx)("p",{children:null==r||null===(n=r.dotDanhGia)||void 0===n?void 0:n.TenDotDanhGia})})}),(0,g.jsx)(i.Z,{justify:"end",children:(0,g.jsx)(l.Z,{children:(0,g.jsx)(t.Z,{type:"primary",disabled:r.loading,onClick:f,children:"Lưu"})})})]})}),(0,g.jsx)(l.Z,{span:24,className:"mt-3",children:(0,g.jsx)(x,{tree:r.tree,loading:r.loading,type:"SV",ref:d,onSuccess:v})})]})})}},6659:(n,e,r)=>{r.d(e,{I6:()=>s,c1:()=>f,gz:()=>h,ZF:()=>v,ZC:()=>m,fK:()=>p});var t=r(6486);function i(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==r)return;var t,i,l=[],o=!0,a=!1;try{for(r=r.call(n);!(o=(t=r.next()).done)&&(l.push(t.value),!e||l.length!==e);o=!0);}catch(n){a=!0,i=n}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return l}(n,e)||o(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||o(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,e){if(n){if("string"==typeof n)return a(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(n,e):void 0}}function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function u(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function c(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){d(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function d(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function s(n,e){return c(c({},n),e)}var f=function(){var n=0,e=function e(r,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0;o?r.id=++n:null!=r&&r.id||(r.id=++n),r.root=i,r.level=++a,r.indexs=u,c["TenTieuChi-".concat(r.id)]=(null==r?void 0:r.TenTieuChi)||"";var s,f=(null==r?void 0:r.SoDiem)||0;(0,t.isEmpty)(r.children)?delete r.children:(f=0,null==r||null===(s=r.children)||void 0===s||s.forEach((function(n,r){f+=e(n,!1,o,a,[].concat(l(u),[r+1]),c,d)})));return d["SoDiem-".concat(r.id)]=f,f};return{renderTree:function(n,r){var t={},i={},l=0;return null==n||n.forEach((function(n,o){l+=e(n,!0,r,0,[o+1],t,i)})),[n,t,i,l]},getIdCurrent:function(){return++n}}},h=function(n,e){var r=function n(e,r){var i;if(r==(null==e?void 0:e.id))return null!=e&&e.children||(e.children=[]),null==e||null===(i=e.children)||void 0===i||i.push({TenTieuChi:"",SoDiem:0,Css:""}),!0;if(!(0,t.isEmpty)(e.children))for(var l=0;l<(null==e||null===(o=e.children)||void 0===o?void 0:o.length);l++){var o;if(n(null==e?void 0:e.children[l],r))return!0}return!1};if(-1===e)return n.unshift({TenTieuChi:"",SoDiem:0,Css:""}),n;if(-2===e)return n.push({TenTieuChi:"",SoDiem:0,Css:""}),n;for(var i=0;i<n.length;i++){if(r(n[i],e))return n}return n},v=function(n,e){for(var r=function n(e,r){var i;if((0,t.isEmpty)(null==e?void 0:e.children))return null;if(null!=e&&null!==(i=e.children)&&void 0!==i&&i.find((function(n){return(null==n?void 0:n.id)==r})))return e.children=(0,t.differenceBy)(null==e?void 0:e.children,[{id:r}],"id"),!0;if(!(0,t.isEmpty)(e.children))for(var l=0;l<(null==e||null===(o=e.children)||void 0===o?void 0:o.length);l++){var o;if(n(null==e?void 0:e.children[l],r))return!0}return!1},i=0;i<n.length;i++){var l=n[i];if((null==l?void 0:l.id)==e)return n=(0,t.differenceBy)(n,[{id:e}],"id");if(r(l,e))return n}return n},m=function(n,e,r,i){for(var l=function n(e,r,i,l){if((null==e?void 0:e.id)==r)return e[l]=i,!0;if(!(0,t.isEmpty)(e.children))for(var o=0;o<(null==e||null===(a=e.children)||void 0===a?void 0:a.length);o++){var a;if(n(null==e?void 0:e.children[o],r,i,l))return!0}return!1},o=0;o<n.length;o++){var a=n[o];if((null==a?void 0:a.id)==e)return a[i]=r,n;if(l(a,e,r,i))return n}return n},p=function(n){var e=[],r=0,t=0,l=0,o={};return null==n||n.forEach((function(n,a){var u=i(y(n,!0,0,[a+1],e,o),3),c=u[0],d=u[1],s=u[2];r+=c,t+=d,l+=s})),e.forEach((function(n){delete n.children})),[e,r,o,t,l]},y=function n(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,s=c(c({},e),{},{root:r,level:++o,index:a,SoDiemSV:(null==e?void 0:e.SoDiemSV)||0,SoDiemCBL:(null==e?void 0:e.SoDiemCBL)||0});u.push(s);var f,h=(null==e?void 0:e.SoDiem)||0,v=(null==e?void 0:e.SoDiemSV)||0,m=(null==e?void 0:e.SoDiemCBL)||0;(0,t.isEmpty)(e.children)?delete e.children:(s.isParent=!0,h=0,null==e||null===(f=e.children)||void 0===f||f.forEach((function(e,r){var t=i(n(e,!1,o,[].concat(l(a),[r+1]),u,d),3),c=t[0],s=t[1],f=t[2];h+=c,v+=s,m+=f})));return s.SoDiem=h,s["SoDiemSV-".concat(null==e?void 0:e.id)]=v,s["SoDiemCBL-".concat(null==e?void 0:e.id)]=m,d["SoDiemSV-".concat(null==e?void 0:e.id)]=v,d["SoDiemCBL-".concat(null==e?void 0:e.id)]=m,[h,v,m]}},7684:(n,e,r)=>{r.d(e,{Z:()=>l});var t=r(3645),i=r.n(t)()((function(n){return n[1]}));i.push([n.id,".dimark-wrapper{padding:10px 10px 0}.dimark-wrapper .ant-table-thead tr th{background:#2a3f54;color:#fff}.dimark-wrapper .ant-pagination{margin-bottom:0}",""]);const l=i},316:(n,e,r)=>{r.d(e,{Z:()=>l});var t=r(3645),i=r.n(t)()((function(n){return n[1]}));i.push([n.id,".TenTieuChi1{font-size:18px;font-weight:700}.TenTieuChi2{font-size:16px;font-style:italic}.TenTieuChi3{font-size:15px;margin-left:5px}",""]);const l=i}}]);