"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[177],{667:(n,e,t)=>{t.d(e,{Wz:()=>a,Wp:()=>l,t5:()=>o,cV:()=>c,Sk:()=>u});var r=t(7461),i=t(7563),a=function(n){var e="/sv/danh-gia/api?".concat(i.stringify(n,{skipNull:!0,skipEmptyString:!0}));return r.o.get(e)},l=function(n){return r.o.post("/sv/danh-gia",n)},o=function(n){var e="/sv/cbl/danh-gia/api?".concat(i.stringify(n,{skipNull:!0,skipEmptyString:!0}));return r.o.get(e)},c=function(n,e){var t="/sv/cbl/danh-gia/api/sinh-vien/".concat(n,"?").concat(i.stringify(e,{skipNull:!0,skipEmptyString:!0}));return r.o.get(t)},u=function(n,e){var t="/sv/cbl/danh-gia/api/sinh-vien/".concat(n);return r.o.post(t,e)}},4252:(n,e,t)=>{t.d(e,{Z:()=>c});t(7294);var r=t(3379),i=t.n(r),a=t(7684),l={insert:"head",singleton:!1};i()(a.Z,l);a.Z.locals;var o=t(5893);const c=function(n){var e=n.children,t=n.className;return(0,o.jsx)("div",{className:"dimark-wrapper ".concat(t||""),children:e})}},6657:(n,e,t)=>{t.d(e,{Z:()=>s});var r=t(7016),i=t(5779),a=t(7294),l=t(5893);function o(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,i,a=[],l=!0,o=!1;try{for(t=t.call(n);!(l=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);l=!0);}catch(n){o=!0,i=n}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return a}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return c(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var u=(0,a.forwardRef)((function(n,e){!function(n){if(null==n)throw new TypeError("Cannot destructure undefined")}(n);var t=o((0,a.useState)(!1),2),c=t[0],u=t[1],s=o((0,a.useState)(null),2),d=(s[0],s[1]),h=(0,a.useCallback)((function(n){console.log(1),d(n),u(!0)}),[]);(0,a.useImperativeHandle)(e,(function(){return{showModal:h}}));var f=(0,a.useCallback)((function(){u(!1),d(null)}),[]);return(0,l.jsx)(r.Z,{visible:c,onCancel:f,title:"Ghi chú",okText:"Cập nhật",cancelText:"Hủy",children:(0,l.jsx)(i.Z.TextArea,{})})}));const s=(0,a.memo)(u)},7461:(n,e,t)=>{t.d(e,{o:()=>a});var r=t(9669),i=t.n(r),a=(document.head.querySelector('meta[name="csrf-token"]'),i().create({baseURL:"/",responseType:"json"}))},4449:(n,e,t)=>{t.d(e,{K:()=>r});var r={emptyText:"Không có dữ liệu"}},9177:(n,e,t)=>{t.r(e),t.d(e,{default:()=>S});var r=t(4112),i=t(1230),a=t(5746),l=t(9650),o=t(1577),c=t(5113),u=t(9166),s=t(8648),d=t(7294),h=t(4252),f=t(4449),v=t(6659),p=t(667),y=t(5977),m=t(807),g=t(6657),x=t(5893);function b(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,i,a=[],l=!0,o=!1;try{for(t=t.call(n);!(l=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);l=!0);}catch(n){o=!0,i=n}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return a}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return k(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}const S=function(){var n,e=b((0,d.useReducer)(v.I6,{sinhViens:[],loading:!1}),2),t=e[0],k=e[1],S=(0,y.k6)(),j=(0,m.YS)().setIdsSv,w=(0,d.useRef)(null);(0,d.useEffect)((function(){Z()}),[]);var Z=(0,d.useCallback)((function(){k({loading:!0}),p.t5().then((function(n){var e;k({sinhViens:null==n?void 0:n.data}),j(null==n||null===(e=n.data)||void 0===e?void 0:e.map((function(n){return{id:null==n?void 0:n.id,MaSV:null==n?void 0:n.MaSV,user:null==n?void 0:n.user}})))})).catch((function(n){var e,t;s.Z.warning({message:(null==n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Lỗi khi tải dữ liệu"})})).finally((function(){return k({loading:!1})}))}),[]),C=(0,d.useCallback)((function(n){var e;null===(e=w.current)||void 0===e||e.showModal(n)}),[]),V=(0,d.useMemo)((function(){return[{title:"Mã SV",dataIndex:"MaSV",className:"cell-center",width:100,key:"MaSV"},{title:"Họ tên SV",dataIndex:"user",width:220,key:"HoTenSinhVien",render:function(n,e){var t,r,i,a;return(0,x.jsxs)(c.Z,{placement:"top",title:null==n?void 0:n.email,children:[(0,x.jsx)(u.Z,{status:null!=e&&null!==(t=e.danhGia)&&void 0!==t&&t.SinhVienDanhGia&&null!=e&&null!==(r=e.danhGia)&&void 0!==r&&r.CanBoLopDanhGia?"success":null!=e&&null!==(i=e.danhGia)&&void 0!==i&&i.SinhVienDanhGia||null!=e&&null!==(a=e.danhGia)&&void 0!==a&&a.CanBoLopDanhGia?"warning":"error"}),"".concat(null==n?void 0:n.HoDem," ").concat(null==n?void 0:n.Ten)]})}},{title:"Sinh viên đánh giá",dataIndex:"danhGia",className:"cell-center",width:150,key:"isDanhGia",render:function(n){return null!=n&&n.SinhVienDanhGia?"".concat((null==n?void 0:n.TongSoDiemSinhVien)||0):"Chưa đánh giá"}},{title:"CBL đánh giá",dataIndex:"danhGia",className:"cell-center",width:150,key:"cbl",render:function(n){return null!=n&&n.CanBoLopDanhGia?null==n?void 0:n.TongSoDiem:"Chưa đánh giá"}},{title:"Xếp loại",dataIndex:"danhGia",className:"cell-center",width:150,key:"point",render:function(n){return(0,v.Mv)(null==n?void 0:n.TongSoDiem)}},{title:"CVHT duyệt",dataIndex:"danhGia",className:"cell-center",width:150,key:"cvht",render:function(n){return null!=n&&n.GiangVienDuyet?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{status:"success"}),"Đã duyệt"]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{status:"warning"}),"Chưa duyệt"]})}},{title:"Ghi chú",dataIndex:"TrangThai",className:"cell-center",width:250,key:"ghichu`",render:function(n,e){return"".concat("0"!=n&&n||""," ").concat("0"!=(null==e?void 0:e.GhiChu)&&(null==e?void 0:e.GhiChu)||"")}},{title:"",dataIndex:"id",key:"id",className:"cell-center",render:function(n,e,r){return(0,x.jsxs)(l.Z,{size:"middle",children:[(0,x.jsx)(o.Z,{type:"primary",onClick:function(){var i,a;return S.push("/sv/cbl/danh-gia/".concat(n,"?prev=").concat(null===(i=t.sinhViens[r-1])||void 0===i?void 0:i.id,"&next=").concat(null===(a=t.sinhViens[r+1])||void 0===a?void 0:a.id,"&masv=").concat(null==e?void 0:e.MaSV))},children:"Đánh giá"}),(0,x.jsx)(o.Z,{type:"primary",onClick:function(){return C(e)},children:"Ghi chú"})]})}}]}),[t.sinhViens]);return(0,x.jsxs)(h.Z,{className:"danh-gia-page",children:[(0,x.jsxs)(i.Z,{className:"bg-white p-3 content",children:[(0,x.jsx)(a.Z,{span:24,children:(0,x.jsxs)(i.Z,{justify:"space-between",gutter:[5,5],children:[(0,x.jsxs)(a.Z,{children:["Số lượng sinh viên: ",null==t||null===(n=t.sinhViens)||void 0===n?void 0:n.length]}),(0,x.jsx)(a.Z,{children:(0,x.jsxs)(i.Z,{gutter:[5,5],children:[(0,x.jsx)(a.Z,{children:(0,x.jsx)(o.Z,{type:"primary",onClick:function(){return window.print()},children:"In bản thống kê"})}),(0,x.jsx)(a.Z,{children:(0,x.jsx)(o.Z,{type:"primary",children:"Xem thống kê"})}),(0,x.jsx)(a.Z,{children:(0,x.jsx)(o.Z,{type:"primary",children:"Nhắc nhở"})})]})})]})}),(0,x.jsx)(a.Z,{span:24,className:"mt-3",children:(0,x.jsx)(r.Z,{bordered:!0,loading:t.loading,columns:V,scroll:{x:700,y:"calc(100vh - 250px)"},dataSource:null==t?void 0:t.sinhViens,rowKey:function(n){return null==n?void 0:n.id},pagination:!1,locale:f.K,rowSelection:{type:"checkbox"}})})]}),(0,x.jsx)(g.Z,{ref:w})]})}},7684:(n,e,t)=>{t.d(e,{Z:()=>a});var r=t(3645),i=t.n(r)()((function(n){return n[1]}));i.push([n.id,".dimark-wrapper{padding:10px 10px 0}.dimark-wrapper .ant-table-thead tr th{background:#2a3f54;color:#fff}.dimark-wrapper .ant-pagination{margin-bottom:0}",""]);const a=i}}]);