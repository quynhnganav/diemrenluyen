"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[69,822,668],{7461:(n,e,t)=>{t.d(e,{o:()=>i});var r=t(9669),i=t.n(r)().create({baseURL:"/"})},6822:(n,e,t)=>{t.r(e),t.d(e,{default:()=>b});var r=t(8835),i=t(4561),o=t(5779),a=t(8648),l=t(963),u=t(3663),c=t(7294),s=t(7461),h=t(5893);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function f(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){m(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function m(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function p(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,i,o=[],a=!0,l=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(n){l=!0,i=n}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return y(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var g=(0,c.forwardRef)((function(n,e){var t=n.callback,d=p((0,c.useState)(!1),2),m=d[0],y=d[1],g=p((0,c.useState)(!1),2),b=g[0],v=g[1],x=p((0,c.useState)(null),2),j=x[0],T=x[1],w=p((0,l.cI)(),1)[0],k=(0,c.useCallback)((function(n){n?(T(n),null==w||w.setFieldsValue(f({},n))):null==w||w.setFieldsValue({TongSoDiem:100}),y(!0)}),[]);(0,c.useImperativeHandle)(e,(function(){return{showModal:k}}));var C=(0,c.useCallback)((function(){y(!1),T(null),null==w||w.resetFields()}),[]),Z=(0,c.useCallback)((function(n){console.log(n),null!=n&&n.TongSoDiem&&(null==n?void 0:n.TongSoDiem)<0?null==w||w.setFields([{name:"TongSoDiem",errors:["Tổng số điểm phải lớn hơn 0"]}]):(v(!0),j?s.o.put("/admin/DM_MauTieuChi/".concat(null==j?void 0:j.id),f(f({},n),{},{PhatHanh:!1})).then((function(n){console.log(n),a.Z.success({message:"Chỉnh sửa thành công"}),t&&t(),C()})).catch((function(n){console.log(n),a.Z.error({message:"Lỗi khi chỉnh sửa"})})).finally((function(){return v(!1)})):s.o.post("/admin/DM_MauTieuChi",f({},n)).then((function(n){console.log(n),a.Z.success({message:"Thêm mới thành công"}),t&&t(),C()})).catch((function(n){console.log(n),a.Z.error({message:"Lỗi khi thêm mới"})})).finally((function(){return v(!1)})))}),[j]),S=(0,c.useCallback)((function(n){null==w||w.submit()}),[]);return(0,h.jsx)(u.default,{visible:m,onCancel:C,onOk:S,okButtonProps:{loading:b},centered:!0,title:(null==j?void 0:j.TenMauTieuChi)||"Thêm mới mẫu tiêu chí",okText:j?"Cập nhật":"Thêm mới",cancelText:"Hủy",children:(0,h.jsxs)(i.Z,{layout:"vertical",wrapperCol:{span:24},labelCol:{span:24},onFinish:Z,form:w,children:[(0,h.jsx)(i.Z.Item,{label:"Tên mẫu tiêu chí",name:"TenMauTieuChi",rules:[{required:!0,message:"Nhập tên mẫu tiêu chí"}],children:(0,h.jsx)(o.Z,{})}),(0,h.jsx)(i.Z.Item,{label:"Tổng số điểm",name:"TongSoDiem",rules:[{required:!0,message:"Nhập tổng số điểm"}],children:(0,h.jsx)(r.Z,{})})]})})}));const b=(0,c.memo)(g)},5069:(n,e,t)=>{t.r(e),t.d(e,{default:()=>v});var r=t(6684),i=t(1230),o=t(5746),a=t(9650),l=t(1577),u=t(8648),c=t(7016),s=t(7294),h=t(7119),d=t(807),f=t(6822),m=t(7461),p=(t(3668),t(5893));function y(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,i,o=[],a=!0,l=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(n){l=!0,i=n}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return g(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var b=c.Z.confirm;const v=function(){(0,d.L)().data;var n=y((0,s.useState)(),2),e=n[0],t=n[1],c=y((0,s.useState)(!1),2),g=c[0],v=c[1],x=(0,s.useRef)(null);(0,s.useEffect)((function(){j()}),[]);var j=function(){v(!0),m.o.get("/admin/DM_MauTieuChi/data",{}).then((function(n){console.log(null==n?void 0:n.data),t((null==n?void 0:n.data)||[])})).finally((function(){return v(!1)}))},T=(0,s.useCallback)((function(){var n;null==x||null===(n=x.current)||void 0===n||n.showModal()}),[]),w=(0,s.useMemo)((function(){return[{title:"ID",dataIndex:"id",key:"id",width:60,fixed:"left"},{title:"Tên mãu tiêu chí",dataIndex:"TenMauTieuChi",key:"TenMauTieuChi"},{title:"Tổng số điểm",dataIndex:"TongSoDiem",key:"TongSoDiem",width:200,render:function(n,e,t){return t+1}},{title:"Phát hành",dataIndex:"PhatHanh",key:"PhatHanh",render:function(n){return n?"Đã phát hành":"Chưa phát hành"}},{title:"",dataIndex:"action",key:"action",render:function(n,e){return(0,p.jsxs)(a.Z,{size:"middle",children:[(0,p.jsx)(l.Z,{type:"primary",onClick:function(){var n;return null==x||null===(n=x.current)||void 0===n?void 0:n.showModal(e)},children:"Chỉnh sửa"}),(0,p.jsx)(l.Z,{type:"primary",children:"Tiêu chí"}),(0,p.jsx)(l.Z,{danger:!0,onClick:function(){return n=null==e?void 0:e.id,t=null==e?void 0:e.TenMauTieuChi,void b({title:"Bạn có muốn xóa mẫu tiêu chí ".concat(t||"","?"),icon:(0,p.jsx)(h.Z,{}),content:"Mẫu tiêu chí này sẽ được xóa vĩnh viễn.",onOk:function(){return new Promise((function(e,t){m.o.delete("/admin/DM_MauTieuChi/".concat(n)).then((function(n){u.Z.success({message:"Xóa thành công"}),j&&j()})).catch((function(n){u.Z.error({message:"Lỗi khi xóa"})})).finally((function(){return e(1)}))}))},okText:"Xác nhận",cancelText:"Hủy"});var n,t},children:"Xóa"})]})}}]}),[]);return(0,p.jsxs)("div",{className:"tieu-chi-wrapper",children:[(0,p.jsxs)(i.Z,{className:"bg-white p-3 content",children:[(0,p.jsx)(o.Z,{span:24,children:(0,p.jsx)(i.Z,{children:(0,p.jsx)(o.Z,{children:(0,p.jsx)(l.Z,{type:"primary",onClick:T,children:"Thêm mới"})})})}),(0,p.jsx)(o.Z,{span:24,className:"mt-3",children:(0,p.jsx)(r.Z,{bordered:!0,loading:g,columns:w,scroll:{x:700,y:"calc(100vh - 290px)"},dataSource:e,rowKey:function(n){return null==n?void 0:n.id}})})]}),(0,p.jsx)(f.default,{ref:x,callback:j})]})}},9236:(n,e,t)=>{t.d(e,{Z:()=>o});var r=t(3645),i=t.n(r)()((function(n){return n[1]}));i.push([n.id,".tieu-chi-wrapper{padding:10px 10px 0}.tieu-chi-wrapper .ant-table-thead tr th{background:#2a3f54;color:#fff}.tieu-chi-wrapper .content{border:1px solid rgba(0,0,0,.1);padding-bottom:0}.tieu-chi-wrapper .content .ant-pagination{margin-bottom:0}",""]);const o=i},3668:(n,e,t)=>{t.r(e),t.d(e,{default:()=>l});var r=t(3379),i=t.n(r),o=t(9236),a={insert:"head",singleton:!1};i()(o.Z,a);const l=o.Z.locals||{}}}]);